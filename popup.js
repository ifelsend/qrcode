function getCurrentTabUrl(callback){var queryInfo={active:true,currentWindow:true};chrome.tabs.query(queryInfo,function(tabs){var tab=tabs[0];var url=tab.url;console.assert(typeof url=='string','tab.url should be a string');callback(url);});}
document.addEventListener('DOMContentLoaded',function(){getCurrentTabUrl(function(url){var img,_width=160,_height=160;new QRCode(document.getElementById('qrcode'),{text:url,width:_width,height:_height,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});});});